### 群聊聊天室
#### 功能：类似qq群功能
  * 1.有人进入聊天室需要输入姓名，姓名不能重复
  * 2.有人进入聊天室时，其他人会收到通知：xxx 进入了聊天室
  * 3.一个人发消息，其他人会收到：xxx ： xxxxxxxxxxx
  * 4.有人退出聊天室，则其他人也会收到通知:xxx退出了聊天室
  * 5.扩展功能：服务器可以向所有用户发送公告:管理员消息： xxxxxxxxx

#### 思路分析：
```
  1.需求分析： 干什么达到什么效果？    
  2.技术点确定    
     * 数据如何流动  
       转发： 客户端 ==> 服务端 ==> 其他客户端  
     * 网络模型如何构建  
       构建 UDP 数据传输  
     * 用户信息如何维护在哪维护  
       服务端： {name: address}  
               [(name, address),]  
     * 随意收发消息如何避免阻塞  
       收发使用不同进程执行  
  3.结构设置注意事项    
     * 采用什么封装结构 : 函数  
     * 编写一个功能测试一个功能  
     * 注意注释和结构的设计  
  4.分析功能模块    
     * 网络搭建  
     * 进入聊天室  
         客户端: * 输入姓名  
                * 将请求发送给服务器  
                * 接收结果  
                * 允许进入则聊天，不允许则重新输入姓名  
         服务端: * 接收请求  
                * 判断是否存在用户名  
                * 如果允许进入，则将用户存储，并通知其他客户端  
                * 如果不允许则结束，把结果通知客户端  
     * 聊天  
     * 退出聊天室
         客户端： * 输入quit或者Ctrl+C 退出
                 * 将请求发送给服务端
                 * 结束进程
         服务端： * 接收退出请求
                 * 发送
     * 管理员消息
  5. 通信协议设置
     * 进入聊天室：L
     * 聊天：C
     * 退出：Q
     * 服务器反馈：OK->成功  其他表示失败
     * 客户端收到 Exit 退出接收进程
```

##  multiprocessing 模块创建进程

### 进程创建方法

* 代码示例：day2/process01.py
* 代码示例：day2/process02.py
* 代码示例：day2/process03.py

1.流程特点 
* 将需要子进程执行的事件封装为函数
* 通过模块的Process类创建进程对象，关联函数
* 可以通过进程对象设置进程信息及属性
* 通过进程对象调用start启动进程
* 通过进程对象调用join回收进程
	
2.基本接口使用
```
Process()
功能 ： 创建进程对象
参数 ： target 绑定要执行的目标函数 
       args 元组，用于给target函数位置传参
       kwargs 字典，给target函数键值传参
```

```
p.start()
功能 ： 启动进程
```
>注意:启动进程此时target绑定函数开始执行，该函数作为子进程执行内容，此时进程真正被创建

```
p.join([timeout])
功能：阻塞等待回收进程
参数：超时时间
```

>注意
>>* 使用multiprocessing创建进程同样是子进程复制父进程空间代码段，父子进程运行互不影响。
>>* 子进程只运行target绑定的函数部分，其余内容均是父进程执行内容。
>>* multiprocessing中父进程往往只用来创建子进程回收子进程，具体事件由子进程完成。
>>* multiprocessing创建的子进程中无法使用标准输入

3. 进程对象属性

***代码示例：day2/process_attr.py***

>p.name  进程名称

>p.pid   对应子进程的PID号

>p.is_alive() 查看子进程是否在生命周期

>p.daemon  设置父子进程的退出关系  
>>* 如果设置为True则子进程会随父进程的退出而结束
>>* 要求必须在start()前设置
>>* 如果daemon设置成True 通常就不会使用 join()


###  进程池实现

***代码示例：day2/pool.py***

1.必要性  
	【1】进程的创建和销毁过程消耗的资源较多  
	【2】当任务量众多，每个任务在很短时间内完成时，需要频繁的创建和销毁进程。此时对计算机压力较大  
	【3】进程池技术很好的解决了以上问题。
	
2.原理
>创建一定数量的进程来处理事件，事件处理完进	程不退出而是继续处理其他事件，直到所有事件全都处理完毕统一销毁。增加进程的重复利用，降低资源消耗。


3.进程池实现  
【1】创建进程池对象，放入适当的进程

```	  
from multiprocessing import Pool

Pool(processes)
功能： 创建进程池对象
参数： 指定进程数量，默认根据系统自动判定
```

【2】 将事件加入进程池队列执行

```
pool.apply_async(func,args,kwds)
功能: 使用进程池执行 func事件
参数： func 事件函数
      args 元组  给func按位置传参
      kwds 字典  给func按照键值传参
返回值： 返回函数事件对象
```

【3】 关闭进程池

```
pool.close()
功能： 关闭进程池
```

【4】 回收进程池中进程

```
pool.join()
功能： 回收进程池中进程
```